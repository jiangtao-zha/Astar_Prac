# 路径规划-A*算法
A*算法属于图路径算法的一种，经常用于全局路径上的规划

## 优先级函数
优先级函数用于判断节点的优先级\
$$f(n) = g(n) + h(n)$$
其中：
- $`g(n)`$ 表示节点n距离起点的距离
- $`h(n)`$ 表示节点n距离重点的预计代价，也是A*算法的启发函数

## 启发函数
启发函数影响着A*算法的行为，设节点n到终点的实际代价为$`y(n)`$,有如下几种可能
1. 当$`h(n)=0`$时，$`f(n) = g(n)`$,则算法退化为DijkStra算法
2. 当$`h(n) \leq y(n)`$时，A*算法一定能够找到最短路径，$`h(n)`$越小，算法遍历点越多，越慢
3. 当$`h(n)=y(n)`$时，理想情况，大部分情况很难算出来
4. 当$`h(n) \ge y(n)`$时，A*算法不能保证找到最短路径
5. 当$`h(n)>>y(n)`$时，只有h(n)产生效果，这也就变成了最佳优先搜索

### 启发函数的具体形式
1. 如果图形中只允许朝上下左右四个方向移动，则可以使用曼哈顿距离（Manhattan distance）。\
$$dis = |dx| + |dy|$$

2. 如果图形中允许朝任何方向移动，则可以使用欧几里得距离（Euclidean distance）。\
$$dis = \sqrt{(dx^2 + dy^2)}$$

## 算法流程

A*算法在运算过程中，每次从优先队列中选取$`f(n)`$值最小（优先级最高）的节点作为下一个待遍历的节点。

另外，A*算法使用两个集合来表示待遍历的节点，与已经遍历过的节点，这通常称之为open_set和close_set。


* 初始化open_set和close_set；
* 将起点加入open_set中，并设置优先级为0（优先级最高）；
* 如果open_set不为空，则从open_set中选取优先级最高的节点n:
    * 如果节点n为终点，则：
        * 从终点开始逐步追踪parent节点，一直达到起点；
        * 返回找到的结果路径，算法结束；
    * 如果节点n不是终点，则：
        * 将节点n从open_set中删除，并加入close_set中；
        * 遍历节点n所有的邻近节点：
            * 如果邻近节点m在close_set中，则：
                * 跳过，选取下一个邻近节点
            * 如果邻近节点m也不在open_set中，则：
                * 设置节点m的parent为节点n
                * 计算节点m的优先级
                * 将节点m加入open_set中

## 结果展示
![效果展示](/assert/show.png)

# 参考
[路径规划之 A* 算法](https://zhuanlan.zhihu.com/p/54510444)